/*! dhx 2015-05-28 */
$dhx.ui.crud.simple.View.Search={window:[],strWindowID:"dbDemo.view.Search.window",layout:[],form:[],_window:function(a){var b=$dhx.ui.crud.simple.View.Search;b.window[a]=new $dhx.ui.window({id:b.strWindowID+a,left:$dhx.ui.crud.simple.View.settings.FormWindow.window.left,top:$dhx.ui.crud.simple.View.settings.FormWindow.window.top,width:$dhx.ui.crud.simple.View.settings.FormWindow.window.width,height:$dhx.ui.crud.simple.View.settings.FormWindow.window.height}),b.window[a].button("park").hide(),b.window[a].button("minmax").hide(),b.window[a].button("stick").hide(),b.window[a].attachEvent("onClose",function(c){return b.form[a].unload(),b.form[a]=null,!0}),b.window[a].setText("Provide some values to search."),b.status_bar=b.window[a].attachStatusBar(),b.status_bar.setText("search is case and special chars insentive")},_layout:function(a){var b=$dhx.ui.crud.simple.View.Search;b.layout[a]=b.window[a].attachLayout($dhx.ui.crud.simple.View.settings.FormWindow.layout),b.layout[a].cells("a").hideHeader()},_form:function(a,b,c,d){var e=$dhx.ui.crud.simple.View.Search,f=$dhx.ui.controller[d];$dhx.ui.crud.simple.View.settings.Search.form.template[1].list=b.form.template,e.form[a]=e.layout[a].cells("a").attachForm($dhx.ui.crud.simple.View.settings.Search.form.template),e.form[a].attachEvent("onButtonClick",function(b){"search"==b&&(f.view.grid.clearAll(),f.view.layout.progressOn(),e.form[a].lock(),c.search.where({query:{and:e.form[a].getFormData()},onFound:function(a,b,c,d){var e={db:"juris",table:"persons"},f=$dhx.dataDriver.getTableSchema(e),g=(f.primary_key.keyPath,$dhx.dataDriver._getColumnsId(e).split(","));alert(g);var h=[];g.forEach(function(a,c,d){h[c]=b[a]})},onReady:function(b,c,d){var g={rows:[]},h={db:"juris",table:"persons"},i=$dhx.dataDriver.getTableSchema(h),j=i.primary_key.keyPath,k=$dhx.dataDriver._getColumnsId(h).split(",");b.forEach(function(a,b,c){var d=[];k.forEach(function(b,c,e){d[c]=a[b]}),g.rows.push({id:a[j],data:d})}),f.view.grid.parse(g,"json"),f.view.layout.progressOff(),e.form[a].unlock()},onerror:function(){f.view.layout.progressOff(),e.form[a].unlock()}}))})},table:[],controller:[],render:function(a){var b=$dhx.ui.crud.simple.View.Search,c=(a.database,a.table,a.schema),d=a.appId;b.controller[e]=$dhx.ui.controller[d];var e=a.table;if(b.table[e]=a.table,$dhx.ui.window_manager.isWindow(b.strWindowID+e))return b.window[e].show(),void b.window[e].bringToTop();$dhx.showDirections("starting view ... ");var f=$dhx.ui.data.model.settings[a.database][a.table];b._window(e),b._layout(e),b._form(e,f,c,d),b.form[e].setFocusOnFirstActive(),a.fnCallBack&&a.fnCallBack(),$dhx.hideDirections()}};